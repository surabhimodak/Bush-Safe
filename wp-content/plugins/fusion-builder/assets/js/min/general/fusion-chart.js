!function(a){"use strict";a.fn.fusionChartElement=function(){var e,s,t,o,l,i,r=a(this),d=void 0!==r.data("type")?r.data("type"):"line",n=void 0!==r.data("border_size")?r.data("border_size"):1,c=void 0!==r.data("border_type")?r.data("border_type"):"smooth",p=void 0!==r.data("chart_fill")?r.data("chart_fill"):"yes",_=void 0!==r.data("x_axis_label")?r.data("x_axis_label"):"",h=void 0!==r.data("y_axis_label")?r.data("y_axis_label"):"",g=[],b=void 0!==r.data("show_tooltips")?r.data("show_tooltips"):"yes",u=[],x="",v=[],f="",y=void 0!==r.data("chart_axis_text_color")?r.data("chart_axis_text_color"):null,A=void 0!==r.data("chart_gridline_color")?r.data("chart_gridline_color"):null,k=0,L=[],C=void 0!==r.data("chart_legend_position")?r.data("chart_legend_position"):"off",m=void 0!==r.data("chart_point_style")?r.data("chart_point_style"):"",S=void 0!==r.data("chart_point_size")?r.data("chart_point_size"):"",w=void 0!==r.data("chart_point_border_color")?r.data("chart_point_border_color"):"",z=void 0!==r.data("chart_point_bg_color")?r.data("chart_point_bg_color"):"",B=a("body").hasClass("rtl"),E={labels:[],datasets:[]},j={responsive:!0,tooltips:{enabled:!0},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]},legend:{labels:{},display:!0},layout:{padding:{left:5,right:5,top:5,bottom:5}}},R=r.find(".fusion-chart-dataset"),Z=a(R).length;if(0!==Z){for((5<S||5<n)&&(j.layout.padding.top=S<n?n:S),"polarArea"!==d&&"radar"!==d||(j.scale={}),(s="pie"===d||"doughnut"===d||"polarArea"===d||("bar"===d||"horizontalBar"===d)&&1===R.length)&&(void 0!==r.data("bg_colors")&&(u=r.data("bg_colors").toString().split("|")),void 0!==r.data("border_colors")&&(v=r.data("border_colors").toString().split("|")),void 0!==r.data("x_axis_labels")&&(L=r.data("x_axis_labels").toString().split("|"))),"off"===p&&(p=!1),j.tooltips.enabled="yes"===b,l=0;l<Z;l++)o="",s||void 0!==a(R[l]).data("label")&&(o=a(R[l]).data("label").toString().trim(),E.labels.push(o),L.push(o)),s||(void 0!==a(R[l]).data("background_color")&&u.push(a(R[l]).data("background_color").toString().trim()),void 0!==a(R[l]).data("border_color")&&v.push(a(R[l]).data("border_color").toString().trim())),void 0!==a(R[l]).data("values")&&(g[l]=a(R[l]).data("values").toString().split("|"),!s&&k<g[l].length&&(k=g[l].length));if(void 0!==r.data("x_axis_labels")?E.labels=r.data("x_axis_labels").toString().split("|"):E.labels="pie"===d||"doughnut"===d||"polarArea"===d?new Array(R.length):new Array(k),!0===B)for(E.labels=E.labels.reverse(),u=u.reverse(),v=v.reverse(),L=L.reverse(),i=0;i<g.length;i++)g[i]=g[i].reverse();for(l=0;l<Z;l++)t=[],s?(x=u,f=v,t=g[l],o=void 0!==a(R[l]).data("label")?a(R[l]).data("label").toString().trim():""):(x=void 0!==u[l]?u[l]:"",f=void 0!==v[l]?v[l]:"",t=g[l],o=void 0!==L[l]&&!0===Array.isArray(L)?L[l]:""),E.datasets.push({label:o,data:t,backgroundColor:x,borderColor:f,borderWidth:n}),"line"===d&&(E.datasets[l].fill=p,"stepped"===c&&(E.datasets[l].steppedLine=!0),""!==m&&(E.datasets[l].pointStyle=m),""!==S&&(E.datasets[l].pointRadius=S,E.datasets[l].pointHoverRadius=S),""!==w&&(E.datasets[l].pointBorderColor=w),""!==z&&(E.datasets[l].pointBackgroundColor=z));s&&(E.labels=L),"bar"!==d&&"line"!==d||(j.scales.yAxes[0].ticks={beginAtZero:!0}),"horizontalBar"===d&&(j.scales.xAxes[0].ticks={beginAtZero:!0}),""!==_&&"pie"!==d&&"doughnut"!==d&&"polarArea"!==d&&"radar"!==d&&(j.scales.xAxes[0].display=!0,j.scales.xAxes[0].scaleLabel={display:!0,labelString:_},null!==y&&(j.scales.xAxes[0].scaleLabel.fontColor=y)),""!==h&&"pie"!==d&&"doughnut"!==d&&"polarArea"!==d&&"radar"!==d&&(j.scales.yAxes[0].display=!0,j.scales.yAxes[0].scaleLabel={display:!0,labelString:h},null!==y&&(j.scales.yAxes[0].scaleLabel.fontColor=y),!0===B&&"horizontalBar"!==d&&(j.scales.yAxes[0].position="right")),"line"===d&&"non_smooth"===c&&(j.elements={line:{tension:1e-6}}),j.legend.display=!1,j.legendCallback=function(a){var e,s,t=[];for(t.push('<ul class="fusion-chart-legend-'+a.id+'">'),e=0;e<L.length;e++)s=void 0!==u[e]?u[e]:"transparent",t.push('<li><span style="background-color:'+s+'">'),L[e]&&t.push(L[e]),t.push("</span></li>");return t.push("</ul>"),t.join("")},null!==A&&("polarArea"===d||"radar"===d?(void 0===j.scale.gridLines&&(j.scale.gridLines={},j.scale.angleLines={}),j.scale.gridLines.color=A,j.scale.angleLines.color=A):(void 0===j.scales.yAxes[0].gridLines&&(j.scales.yAxes[0].gridLines={}),void 0===j.scales.xAxes[0].gridLines&&(j.scales.xAxes[0].gridLines={}),j.scales.xAxes[0].gridLines.color=A,j.scales.yAxes[0].gridLines.color=A)),null!==y&&("polarArea"===d||"radar"===d?(void 0===j.scale.ticks&&(j.scale.ticks={}),j.scale.ticks.fontColor=y):(void 0===j.scales.yAxes[0].ticks&&(j.scales.yAxes[0].ticks={}),void 0===j.scales.xAxes[0].ticks&&(j.scales.xAxes[0].ticks={}),j.scales.xAxes[0].ticks.fontColor=y,j.scales.yAxes[0].ticks.fontColor=y)),e=new Chart(r.find("canvas").get(0),{type:d,data:E,options:j}),"off"!==C&&r.find(".fusion-chart-legend-wrap").html(e.generateLegend())}},a(window).on("load",function(){a.each(a(".fusion-chart"),function(){a(this).fusionChartElement()})}),a(window).on("fusion-element-render-fusion_chart",function(e,s){a('div[data-cid="'+s+'"]').find(".fusion-chart").fusionChartElement()})}(jQuery);